/* ************************************************************************** */
/* ********************** FILE DEFINITION SECTION *************************** */
/* ************************************************************************** */
/* File Name   : main.c														  */
/* Author      : MAAM														  */
/* Version     : v01.2														  */
/* date        : May 19, 2023												  */
/* ************************************************************************** */
/* ************************ HEADER FILES INCLUDES **************************  */
/* ************************************************************************** */

/* ************************************************************************** */
/* ********************** TYPE_DEF/STRUCT/ENUM SECTION ********************** */
/* ************************************************************************** */

/* ************************************************************************** */
/* ************************** MACRO/DEFINE SECTION ************************** */
/* ************************************************************************** */

/* ************************************************************************** */
/* ***************************** CONST SECTION ****************************** */
/* ************************************************************************** */

/* ************************************************************************** */
/* ***************************** VARIABLE SECTION *************************** */
/* ************************************************************************** */

/* ************************************************************************** */
/* **************************** FUNCTION SECTION **************************** */
/* ************************************************************************** */

#ifdef	SWC_SPI

#include "LBTY_int.h"
#include "LBIT_int.h"
#include "LCTY_int.h"

#include "DELAY.h"

#include "GPIO_int.h"
#include "GPIO_cfg.h"

#include "INTP.h"

#include "SPI_int.h"
#include "SPI_cfg.h"

void SPI_vidINT(void);
static u8 u8char = '0';
static volatile u8 u8Flag;
int main(void){

	SPI_vidInit();
	SPI_vidSetCallBack_OverFlow(SPI_vidINT);
	
	GPIO_u8SetPortDirection(D, PORT_OUTPUT);

    INTP_vidEnable();
    
    if(SPI_MODE == SPI_Master)
    	SPI_vidSetStr( (u8*)"Hello MAAM\n\r", 0);

   	while(1){
   	    if(SPI_MODE == SPI_Master && u8Flag){
   			u8Flag = LBTY_RESET;
   	    	SPI_u8SetChar(u8char, 0);
   	    	vidMyDelay_ms(500);
   	    }
   		GPIO_u8SetPortValue(D, u8char);
   	}
   	return 0;
}

void SPI_vidINT(void){
	if(SPI_MODE == SPI_Master){
		u8Flag = LBTY_SET;
		u8char++;
	}
	if(SPI_MODE == SPI_Slave)
		SPI_u8GetChar(&u8char, 0);
}

#endif


/*************************** E N D (main.c) ******************************/
